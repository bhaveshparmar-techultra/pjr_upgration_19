<?xml version="1.0" encoding="utf-8" ?>
<!-- Copyright 2017-22 Kbizsoft
     License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl). -->
<odoo>
    <template
        id="report_saleorder_document"
        inherit_id="sale.report_saleorder_document"
    >
        <!-- Add display_discount_fixed variable -->
        <xpath expr="//t[@t-set='display_discount']" position="after">
            <t
                t-set="display_discount_fixed"
                t-value="any(l.discount_fixed for l in lines_to_report)"
            />
        </xpath>

        <!-- Add header column for fixed discount -->
        <xpath expr="//th[@name='th_discount']" position="after">
            <th
                name="th_discount_fixed"
                t-if="display_discount_fixed"
                class="text-end"
                groups="sale.group_discount_per_so_line"
            >
                <span>Disc. Fixed</span>
            </th>
        </xpath>

        <!-- Add data column for fixed discount -->
        <xpath expr="//td[@name='td_product_discount']" position="after">
            <td
                name="td_product_discount_fixed"
                t-if="display_discount_fixed"
                class="text-end"
                groups="sale.group_discount_per_so_line"
            >
                <t t-if="not collapse_prices">
                    <span t-field="line.discount_fixed"/>
                </t>
            </td>
        </xpath>
    </template>
</odoo>
